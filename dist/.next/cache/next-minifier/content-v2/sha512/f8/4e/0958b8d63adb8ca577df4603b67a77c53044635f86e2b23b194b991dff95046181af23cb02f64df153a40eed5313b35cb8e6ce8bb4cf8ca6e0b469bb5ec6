{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[104],{\"2/Rp\":function(e,t,n){\"use strict\";var r=n(\"zvFY\");t.a=r.b},\"2qu3\":function(e,t,n){\"use strict\";var r=n(\"oI91\"),a=n(\"/GRZ\"),o=n(\"i2R6\");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){var n=\"undefined\"!==typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if(\"string\"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&\"number\"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.__esModule=!0,t.default=void 0;var l,f=(l=n(\"q1tI\"))&&l.__esModule?l:{default:l},d=n(\"8L3h\"),p=n(\"jwwS\");var v=[],b=[],m=!1;function h(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function O(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var a=h(e[r]);a.loading?t.loading=!0:(t.loaded[r]=a.loaded,t.error=a.error),n.push(a.promise),a.promise.then((function(e){t.loaded[r]=e})).catch((function(e){t.error=e}))}))}catch(r){t.error=r}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function g(e,t){return f.default.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function y(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:g,webpack:null,modules:null},t),r=null;function a(){if(!r){var t=new j(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!m&&\"function\"===typeof n.webpack){var o=n.webpack();b.push((function(e){var t,n=i(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return a()}}catch(c){n.e(c)}finally{n.f()}}))}var c=function(e,t){a();var o=f.default.useContext(p.LoadableContext),c=(0,d.useSubscription)(r);return f.default.useImperativeHandle(t,(function(){return{retry:r.retry}}),[]),o&&Array.isArray(n.modules)&&n.modules.forEach((function(e){o(e)})),f.default.useMemo((function(){return c.loading||c.error?f.default.createElement(n.loading,{isLoading:c.loading,pastDelay:c.pastDelay,timedOut:c.timedOut,error:c.error,retry:r.retry}):c.loaded?n.render(c.loaded,e):null}),[e,c])};return c.preload=function(){return a()},c.displayName=\"LoadableComponent\",f.default.forwardRef(c)}var j=function(){function e(t,n){a(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return o(e,[{key:\"promise\",value:function(){return this._res.promise}},{key:\"retry\",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&(\"number\"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),\"number\"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:\"_update\",value:function(e){this._state=s(s({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:\"_clearTimeouts\",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:\"getCurrentValue\",value:function(){return this._state}},{key:\"subscribe\",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function w(e){return y(h,e)}function C(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return C(e,t)}))}w.Map=function(e){if(\"function\"!==typeof e.render)throw new Error(\"LoadableMap requires a `render(loaded, props)` function\");return y(O,e)},w.preloadAll=function(){return new Promise((function(e,t){C(v).then(e,t)}))},w.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return m=!0,t()};C(b,e).then(n,n)}))},window.__NEXT_PRELOADREADY=w.preloadReady;var x=w;t.default=x},\"5bA4\":function(e,t,n){\"use strict\";var r=n(\"VTBJ\"),a=n(\"q1tI\"),o={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"}}]},name:\"left\",theme:\"outlined\"},c=n(\"6VBw\"),s=function(e,t){return a.createElement(c.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};s.displayName=\"LeftOutlined\";t.a=a.forwardRef(s)},\"5pvF\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return u}));var r=n(\"1OyB\"),a=n(\"vuIU\"),o=n(\"Ji7U\"),c=n(\"md7G\"),s=n(\"foSv\");function i(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var u=new(function(e){Object(o.a)(n,e);var t=i(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:\"getConversations\",value:function(e){return this.get(this.buildUrl(\"/conversations\",e))}},{key:\"searchConversations\",value:function(e){return this.get(this.buildUrl(\"/conversations/search\",e))}},{key:\"createConversation\",value:function(e){return this.post(\"/conversations\",e)}},{key:\"getConversationDetail\",value:function(e){return this.get(\"/conversations/\".concat(e))}},{key:\"getConversationByStreamId\",value:function(e){return this.get(\"/conversations/stream/\".concat(e))}},{key:\"getMessages\",value:function(e,t){return this.get(this.buildUrl(\"/messages/conversations/\".concat(e),t))}},{key:\"getPublicMessages\",value:function(e,t){return this.get(this.buildUrl(\"/messages/conversations/public/\".concat(e),t))}},{key:\"sendMessage\",value:function(e,t){return this.post(\"/messages/conversations/\".concat(e),t)}},{key:\"sendStreamMessage\",value:function(e,t){return this.post(\"/messages/stream/conversations/\".concat(e),t)}},{key:\"sendPublicStreamMessage\",value:function(e,t){return this.post(\"/messages/stream/public/conversations/\".concat(e),t)}},{key:\"findPublicConversationPerformer\",value:function(e){return this.get(\"/conversations/stream/public/\".concat(e))}},{key:\"countTotalNotRead\",value:function(){return this.get(\"/messages/counting-not-read-messages\")}},{key:\"readAllInConversation\",value:function(e,t){return this.post(\"/messages/read-all\",{conversationId:e,recipientId:t})}},{key:\"getMessageUploadUrl\",value:function(){return\"\".concat(\"https://api.dtest.live\",\"/messages/private/file\")}},{key:\"deleteMessage\",value:function(e){return this.del(\"/messages/\".concat(e))}},{key:\"deleteAllMessageInConversation\",value:function(e){return this.del(\"/messages/\".concat(e,\"/remove-all-message\"))}}]),n}(n(\"/bfT\").a))},Dx9A:function(e,t,n){\"use strict\";var r=n(\"VTBJ\"),a=n(\"q1tI\"),o={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"defs\",attrs:{},children:[{tag:\"style\",attrs:{}}]},{tag:\"path\",attrs:{d:\"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z\"}}]},name:\"send\",theme:\"outlined\"},c=n(\"6VBw\"),s=function(e,t){return a.createElement(c.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};s.displayName=\"SendOutlined\";t.a=a.forwardRef(s)},KrTs:function(e,t,n){\"use strict\";var r=n(\"rePB\"),a=n(\"U8pU\"),o=n(\"wx14\"),c=n(\"q1tI\"),s=n(\"8XRh\"),i=n(\"TSYQ\"),u=n.n(i),l=n(\"H84U\"),f=n(\"0n0R\"),d=n(\"ODXe\");function p(e){var t,n=e.prefixCls,r=e.value,a=e.current,o=e.offset,s=void 0===o?0:o;return s&&(t={position:\"absolute\",top:\"\".concat(s,\"00%\"),left:0}),c.createElement(\"span\",{style:t,className:u()(\"\".concat(n,\"-only-unit\"),{current:a})},r)}function v(e,t,n){for(var r=e,a=0;(r+10)%10!==t;)r+=n,a+=n;return a}function b(e){var t,n,r=e.prefixCls,a=e.count,s=e.value,i=Number(s),u=Math.abs(a),l=c.useState(i),f=Object(d.a)(l,2),b=f[0],m=f[1],h=c.useState(u),O=Object(d.a)(h,2),g=O[0],y=O[1],j=function(){m(i),y(u)};if(c.useEffect((function(){var e=setTimeout((function(){j()}),1e3);return function(){clearTimeout(e)}}),[i]),b===i||Number.isNaN(i)||Number.isNaN(b))t=[c.createElement(p,Object(o.a)({},e,{key:i,current:!0}))],n={transition:\"none\"};else{t=[];for(var w=i+10,C=[],x=i;x<=w;x+=1)C.push(x);var S=C.findIndex((function(e){return e%10===b}));t=C.map((function(t,n){var r=t%10;return c.createElement(p,Object(o.a)({},e,{key:t,value:r,offset:n-S,current:n===S}))})),n={transform:\"translateY(\".concat(-v(b,i,g<u?1:-1),\"00%)\")}}return c.createElement(\"span\",{className:\"\".concat(r,\"-only\"),style:n,onTransitionEnd:j},t)}var m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=function(e){var t=e.prefixCls,n=e.count,r=e.className,a=e.motionClassName,s=e.style,i=e.title,d=e.show,p=e.component,v=void 0===p?\"sup\":p,h=e.children,O=m(e,[\"prefixCls\",\"count\",\"className\",\"motionClassName\",\"style\",\"title\",\"show\",\"component\",\"children\"]),g=(0,c.useContext(l.b).getPrefixCls)(\"scroll-number\",t),y=Object(o.a)(Object(o.a)({},O),{\"data-show\":d,style:s,className:u()(g,r,a),title:i}),j=n;if(n&&Number(n)%1===0){var w=String(n).split(\"\");j=w.map((function(e,t){return c.createElement(b,{prefixCls:g,count:Number(n),value:e,key:w.length-t})}))}return s&&s.borderColor&&(y.style=Object(o.a)(Object(o.a)({},s),{boxShadow:\"0 0 0 1px \".concat(s.borderColor,\" inset\")})),h?Object(f.a)(h,(function(e){return{className:u()(\"\".concat(g,\"-custom-component\"),null===e||void 0===e?void 0:e.className,a)}})):c.createElement(v,y,j)},O=n(\"09Wf\");function g(e){return-1!==O.a.indexOf(e)}var y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},j=function(e){var t,n,i=e.prefixCls,d=e.scrollNumberPrefixCls,p=e.children,v=e.status,b=e.text,m=e.color,O=e.count,j=void 0===O?null:O,w=e.overflowCount,C=void 0===w?99:w,x=e.dot,S=void 0!==x&&x,E=e.size,k=void 0===E?\"default\":E,N=e.title,_=e.offset,R=e.style,P=e.className,M=e.showZero,A=void 0!==M&&M,I=y(e,[\"prefixCls\",\"scrollNumberPrefixCls\",\"children\",\"status\",\"text\",\"color\",\"count\",\"overflowCount\",\"dot\",\"size\",\"title\",\"offset\",\"style\",\"className\",\"showZero\"]),T=c.useContext(l.b),D=T.getPrefixCls,B=T.direction,U=D(\"badge\",i),L=j>C?\"\".concat(C,\"+\"):j,z=null!==v&&void 0!==v||null!==m&&void 0!==m,q=\"0\"===L||0===L,F=S&&!q,V=F?\"\":L,H=Object(c.useMemo)((function(){return(null===V||void 0===V||\"\"===V||q&&!A)&&!F}),[V,q,A,F]),G=Object(c.useRef)(j);H||(G.current=j);var J=G.current,X=Object(c.useRef)(V);H||(X.current=V);var K=X.current,W=Object(c.useRef)(F);H||(W.current=F);var Y=Object(c.useMemo)((function(){if(!_)return Object(o.a)({},R);var e={marginTop:_[1]};return\"rtl\"===B?e.left=parseInt(_[0],10):e.right=-parseInt(_[0],10),Object(o.a)(Object(o.a)({},e),R)}),[B,_,R]),Q=null!==N&&void 0!==N?N:\"string\"===typeof J||\"number\"===typeof J?J:void 0,Z=H||!b?null:c.createElement(\"span\",{className:\"\".concat(U,\"-status-text\")},b),$=J&&\"object\"===Object(a.a)(J)?Object(f.a)(J,(function(e){return{style:Object(o.a)(Object(o.a)({},Y),e.style)}})):void 0,ee=u()((t={},Object(r.a)(t,\"\".concat(U,\"-status-dot\"),z),Object(r.a)(t,\"\".concat(U,\"-status-\").concat(v),!!v),Object(r.a)(t,\"\".concat(U,\"-status-\").concat(m),g(m)),t)),te={};m&&!g(m)&&(te.background=m);var ne=u()(U,(n={},Object(r.a)(n,\"\".concat(U,\"-status\"),z),Object(r.a)(n,\"\".concat(U,\"-not-a-wrapper\"),!p),Object(r.a)(n,\"\".concat(U,\"-rtl\"),\"rtl\"===B),n),P);if(!p&&z){var re=Y.color;return c.createElement(\"span\",Object(o.a)({},I,{className:ne,style:Y}),c.createElement(\"span\",{className:ee,style:te}),c.createElement(\"span\",{style:{color:re},className:\"\".concat(U,\"-status-text\")},b))}return c.createElement(\"span\",Object(o.a)({},I,{className:ne}),p,c.createElement(s.default,{visible:!H,motionName:\"\".concat(U,\"-zoom\"),motionAppear:!1},(function(e){var t,n=e.className,a=D(\"scroll-number\",d),s=W.current,i=u()((t={},Object(r.a)(t,\"\".concat(U,\"-dot\"),s),Object(r.a)(t,\"\".concat(U,\"-count\"),!s),Object(r.a)(t,\"\".concat(U,\"-count-sm\"),\"small\"===k),Object(r.a)(t,\"\".concat(U,\"-multiple-words\"),!s&&K&&K.toString().length>1),Object(r.a)(t,\"\".concat(U,\"-status-\").concat(v),!!v),Object(r.a)(t,\"\".concat(U,\"-status-\").concat(m),g(m)),t)),l=Object(o.a)({},Y);return m&&!g(m)&&((l=l||{}).background=m),c.createElement(h,{prefixCls:a,show:!H,motionClassName:n,className:i,count:K,title:Q,style:l,key:\"scrollNumber\"},$)})),Z)};j.Ribbon=function(e){var t,n=e.className,a=e.prefixCls,s=e.style,i=e.color,f=e.children,d=e.text,p=e.placement,v=void 0===p?\"end\":p,b=c.useContext(l.b),m=b.getPrefixCls,h=b.direction,O=m(\"ribbon\",a),y=g(i),j=u()(O,\"\".concat(O,\"-placement-\").concat(v),(t={},Object(r.a)(t,\"\".concat(O,\"-rtl\"),\"rtl\"===h),Object(r.a)(t,\"\".concat(O,\"-color-\").concat(i),y),t),n),w={},C={};return i&&!y&&(w.background=i,C.color=i),c.createElement(\"div\",{className:\"\".concat(O,\"-wrapper\")},f,c.createElement(\"div\",{className:j,style:Object(o.a)(Object(o.a)({},w),s)},c.createElement(\"span\",{className:\"\".concat(O,\"-text\")},d),c.createElement(\"div\",{className:\"\".concat(O,\"-corner\"),style:C})))};t.a=j},\"LLt/\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return d}));var r=n(\"1OyB\"),a=n(\"vuIU\"),o=n(\"Ji7U\"),c=n(\"md7G\"),s=n(\"foSv\"),i=n(\"p46w\"),u=n.n(i),l=n(\"/bfT\");function f(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var d=new(function(e){Object(o.a)(n,e);var t=f(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:\"login\",value:function(e){return this.post(\"/auth/users/login\",e)}},{key:\"setAuthHeader\",value:function(e,t){u.a.set(l.f,e,{expires:365}),u.a.set(l.c,t,{expires:365}),this.setAuthHeaderToken(e)}},{key:\"performerLogin\",value:function(e){return this.post(\"/auth/performers/login\",e)}},{key:\"studioLogin\",value:function(e){return this.post(\"/auth/studio/login\",e)}},{key:\"setToken\",value:function(e){u.a.set(l.f,e,{expires:365}),this.setAuthHeaderToken(e)}},{key:\"getToken\",value:function(){return u.a.get(l.f)||null}},{key:\"getRole\",value:function(){return u.a.get(l.c)||null}},{key:\"removeToken\",value:function(){u.a.remove(l.f),u.a.remove(l.c)}},{key:\"removeRemember\",value:function(){u.a.remove(\"rememberMe\")}},{key:\"updatePassword\",value:function(e){return this.put(\"/auth/users/me/password\",e)}},{key:\"performersRegister\",value:function(e){return this.register(\"/auth/performers/register\",e)}},{key:\"userRegister\",value:function(e){return this.post(\"/auth/users/register\",e)}},{key:\"studioRegister\",value:function(e){return this.register(\"/auth/studio/register\",e)}},{key:\"forgotPassword\",value:function(e,t){var n={email:e,type:t};return this.post(\"/auth/users/forgot\",n)}},{key:\"resendVerificationEmail\",value:function(e){return this.post(\"/verification/resend-verification-email\",e)}}]),n}(l.a))},Ol7k:function(e,t,n){\"use strict\";var r=n(\"PKem\"),a=n(\"ZX9x\"),o=r.e;o.Header=r.c,o.Footer=r.b,o.Content=r.a,o.Sider=a.b,t.a=o},PKem:function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return d})),n.d(t,\"c\",(function(){return m})),n.d(t,\"b\",(function(){return h})),n.d(t,\"a\",(function(){return O}));var r=n(\"KQm4\"),a=n(\"rePB\"),o=n(\"ODXe\"),c=n(\"wx14\"),s=n(\"q1tI\"),i=n(\"TSYQ\"),u=n.n(i),l=n(\"H84U\"),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},d=s.createContext({siderHook:{addSider:function(){return null},removeSider:function(){return null}}});function p(e){var t=e.suffixCls,n=e.tagName,r=e.displayName;return function(e){var a=function(r){var a=s.useContext(l.b).getPrefixCls,o=r.prefixCls,i=a(t,o);return s.createElement(e,Object(c.a)({prefixCls:i,tagName:n},r))};return a.displayName=r,a}}var v=function(e){var t=e.prefixCls,n=e.className,r=e.children,a=e.tagName,o=f(e,[\"prefixCls\",\"className\",\"children\",\"tagName\"]),i=u()(t,n);return s.createElement(a,Object(c.a)({className:i},o),r)},b=p({suffixCls:\"layout\",tagName:\"section\",displayName:\"Layout\"})((function(e){var t,n=s.useContext(l.b).direction,i=s.useState([]),p=Object(o.a)(i,2),v=p[0],b=p[1],m=e.prefixCls,h=e.className,O=e.children,g=e.hasSider,y=e.tagName,j=f(e,[\"prefixCls\",\"className\",\"children\",\"hasSider\",\"tagName\"]),w=u()(m,(t={},Object(a.a)(t,\"\".concat(m,\"-has-sider\"),\"boolean\"===typeof g?g:v.length>0),Object(a.a)(t,\"\".concat(m,\"-rtl\"),\"rtl\"===n),t),h);return s.createElement(d.Provider,{value:{siderHook:{addSider:function(e){b((function(t){return[].concat(Object(r.a)(t),[e])}))},removeSider:function(e){b((function(t){return t.filter((function(t){return t!==e}))}))}}}},s.createElement(y,Object(c.a)({className:w},j),O))})),m=p({suffixCls:\"layout-header\",tagName:\"header\",displayName:\"Header\"})(v),h=p({suffixCls:\"layout-footer\",tagName:\"footer\",displayName:\"Footer\"})(v),O=p({suffixCls:\"layout-content\",tagName:\"main\",displayName:\"Content\"})(v);t.e=b},UESt:function(e,t,n){\"use strict\";var r=n(\"VTBJ\"),a=n(\"q1tI\"),o={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z\"}}]},name:\"right\",theme:\"outlined\"},c=n(\"6VBw\"),s=function(e,t){return a.createElement(c.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};s.displayName=\"RightOutlined\";t.a=a.forwardRef(s)},ZX9x:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return w}));var r=n(\"rePB\"),a=n(\"wx14\"),o=n(\"ODXe\"),c=n(\"q1tI\"),s=n(\"TSYQ\"),i=n.n(s),u=n(\"bT9E\"),l=n(\"VTBJ\"),f={icon:{tag:\"svg\",attrs:{viewBox:\"0 0 1024 1024\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z\"}}]},name:\"bars\",theme:\"outlined\"},d=n(\"6VBw\"),p=function(e,t){return c.createElement(d.a,Object(l.a)(Object(l.a)({},e),{},{ref:t,icon:f}))};p.displayName=\"BarsOutlined\";var v=c.forwardRef(p),b=n(\"UESt\"),m=n(\"5bA4\"),h=n(\"PKem\"),O=n(\"H84U\"),g=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},j={xs:\"479.98px\",sm:\"575.98px\",md:\"767.98px\",lg:\"991.98px\",xl:\"1199.98px\",xxl:\"1599.98px\"},w=c.createContext({}),C=function(){var e=0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return e+=1,\"\".concat(t).concat(e)}}(),x=c.forwardRef((function(e,t){var n=e.prefixCls,s=e.className,l=e.trigger,f=e.children,d=e.defaultCollapsed,p=void 0!==d&&d,x=e.theme,S=void 0===x?\"dark\":x,E=e.style,k=void 0===E?{}:E,N=e.collapsible,_=void 0!==N&&N,R=e.reverseArrow,P=void 0!==R&&R,M=e.width,A=void 0===M?200:M,I=e.collapsedWidth,T=void 0===I?80:I,D=e.zeroWidthTriggerStyle,B=e.breakpoint,U=e.onCollapse,L=e.onBreakpoint,z=y(e,[\"prefixCls\",\"className\",\"trigger\",\"children\",\"defaultCollapsed\",\"theme\",\"style\",\"collapsible\",\"reverseArrow\",\"width\",\"collapsedWidth\",\"zeroWidthTriggerStyle\",\"breakpoint\",\"onCollapse\",\"onBreakpoint\"]),q=Object(c.useContext)(h.d).siderHook,F=Object(c.useState)(\"collapsed\"in z?z.collapsed:p),V=Object(o.a)(F,2),H=V[0],G=V[1],J=Object(c.useState)(!1),X=Object(o.a)(J,2),K=X[0],W=X[1];Object(c.useEffect)((function(){\"collapsed\"in z&&G(z.collapsed)}),[z.collapsed]);var Y=function(e,t){\"collapsed\"in z||G(e),null===U||void 0===U||U(e,t)},Q=Object(c.useRef)();Q.current=function(e){W(e.matches),null===L||void 0===L||L(e.matches),H!==e.matches&&Y(e.matches,\"responsive\")},Object(c.useEffect)((function(){function e(e){return Q.current(e)}var t;if(\"undefined\"!==typeof window){var n=window.matchMedia;if(n&&B&&B in j){t=n(\"(max-width: \".concat(j[B],\")\"));try{t.addEventListener(\"change\",e)}catch(r){t.addListener(e)}e(t)}}return function(){try{null===t||void 0===t||t.removeEventListener(\"change\",e)}catch(r){null===t||void 0===t||t.removeListener(e)}}}),[]),Object(c.useEffect)((function(){var e=C(\"ant-sider-\");return q.addSider(e),function(){return q.removeSider(e)}}),[]);var Z=function(){Y(!H,\"clickTrigger\")},$=Object(c.useContext)(O.b).getPrefixCls;return c.createElement(w.Provider,{value:{siderCollapsed:H}},function(){var e,o=$(\"layout-sider\",n),d=Object(u.a)(z,[\"collapsed\"]),p=H?T:A,h=g(p)?\"\".concat(p,\"px\"):String(p),O=0===parseFloat(String(T||0))?c.createElement(\"span\",{onClick:Z,className:i()(\"\".concat(o,\"-zero-width-trigger\"),\"\".concat(o,\"-zero-width-trigger-\").concat(P?\"right\":\"left\")),style:D},l||c.createElement(v,null)):null,y={expanded:P?c.createElement(b.a,null):c.createElement(m.a,null),collapsed:P?c.createElement(m.a,null):c.createElement(b.a,null)}[H?\"collapsed\":\"expanded\"],j=null!==l?O||c.createElement(\"div\",{className:\"\".concat(o,\"-trigger\"),onClick:Z,style:{width:h}},l||y):null,w=Object(a.a)(Object(a.a)({},k),{flex:\"0 0 \".concat(h),maxWidth:h,minWidth:h,width:h}),C=i()(o,\"\".concat(o,\"-\").concat(S),(e={},Object(r.a)(e,\"\".concat(o,\"-collapsed\"),!!H),Object(r.a)(e,\"\".concat(o,\"-has-trigger\"),_&&null!==l&&!O),Object(r.a)(e,\"\".concat(o,\"-below\"),!!K),Object(r.a)(e,\"\".concat(o,\"-zero-width\"),0===parseFloat(h)),e),s);return c.createElement(\"aside\",Object(a.a)({className:C},d,{style:w,ref:t}),c.createElement(\"div\",{className:\"\".concat(o,\"-children\")},f),_||K&&O?j:null)}())}));x.displayName=\"Sider\";t.b=x},a6RD:function(e,t,n){\"use strict\";var r=n(\"oI91\");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.__esModule=!0,t.noSSR=i,t.default=function(e,t){var n=c.default,r={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?r.loader=function(){return e}:\"function\"===typeof e?r.loader=e:\"object\"===typeof e&&(r=o(o({},r),e));if(r=o(o({},r),t),\"object\"===typeof e&&!(e instanceof Promise)&&(e.render&&(r.render=function(t,n){return e.render(n,t)}),e.modules)){n=c.default.Map;var a={},s=e.modules();Object.keys(s).forEach((function(e){var t=s[e];\"function\"!==typeof t.then?a[e]=t:a[e]=function(){return t.then((function(e){return e.default||e}))}})),r.loader=a}r.loadableGenerated&&delete(r=o(o({},r),r.loadableGenerated)).loadableGenerated;if(\"boolean\"===typeof r.ssr){if(!r.ssr)return delete r.ssr,i(n,r);delete r.ssr}return n(r)};s(n(\"q1tI\"));var c=s(n(\"2qu3\"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return delete t.webpack,delete t.modules,e(t)}},cJ20:function(e,t,n){\"use strict\";n.r(t);var r=n(\"1OyB\"),a=n(\"vuIU\"),o=n(\"Ji7U\"),c=n(\"md7G\"),s=n(\"foSv\"),i=n(\"rePB\"),u=n(\"q1tI\"),l=n.n(u),f=n(\"Ol7k\"),d=n(\"/MKj\"),p=n(\"8Kt/\"),v=n.n(p),b=(n(\"OVUx\"),n(\"wqbU\")),m=n(\"2/Rp\"),h=n(\"o0o1\"),O=n.n(h),g=n(\"HaE+\"),y=n(\"JX7q\"),j=(n(\"od0E\"),n(\"AY7M\")),w=n(\"LvDl\"),C=n(\"5pvF\"),x=(n(\"jcEp\"),l.a.createElement);function S(e){var t=e.onSearch;return x(\"div\",{className:\"conversation-search\"},x(\"input\",{onChange:t,type:\"search\",className:\"conversation-search-input\",placeholder:\"Search conversation...\"}))}var E=n(\"KrTs\"),k=n(\"wd/R\"),N=n.n(k),_=(n(\"oYE4\"),l.a.createElement);function R(e){var t=e.setActive,n=e.selected,r=e.data,a=r.recipientInfo,o=r.lastMessage,c=r._id,s=r.updatedAt,i=r.lastMessageCreatedAt,u=r.totalNotSeenMessages,l=void 0===u?0:u;return _(\"div\",{\"aria-hidden\":\"true\",className:n?\"conversation-list-item active\":\"conversation-list-item\",onClick:function(){return t(c)}},_(\"div\",{className:\"conversation-left-corner\"},_(\"img\",{className:\"conversation-photo\",src:(null===a||void 0===a?void 0:a.avatar)||\"/default-user-icon.png\",alt:\"conversation\"})),_(\"div\",{className:\"conversation-info\"},_(\"h1\",{className:\"conversation-title\"},(null===a||void 0===a?void 0:a.username)||\"N/A\"),_(\"p\",{className:\"conversation-snippet\"},o),_(\"p\",{className:\"conversation-time\"},N()(i||s).fromNow())),_(E.a,{className:\"notification-badge\",count:l}))}var P=l.a.createElement;function M(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var A,I=function(e){Object(o.a)(n,e);var t=M(n);function n(e){var a;return Object(r.a)(this,n),a=t.call(this,e),Object(i.a)(Object(y.a)(a),\"conversationsRef\",void 0),Object(i.a)(Object(y.a)(a),\"state\",{conversationPage:1,keyword:\"\"}),Object(i.a)(Object(y.a)(a),\"onMessage\",function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r,o,c,s,i,u,l,f,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt(\"return\");case 2:return n=a.props,r=n.conversation,o=n.currentPerformer,c=n.currentUser,s=n.getConversationDetail,i=n.receiveMessageSuccess,u=n.updateLastMessage,l=r.mapping,f=t.conversationId,d=t.text,l[t.conversationId]||s({id:t.conversationId}),i(t),u({conversationId:f,lastMessage:d}),e.next=10,C.a.readAllInConversation(f,c._id?c._id:o._id);case 10:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(i.a)(Object(y.a)(a),\"onSearchConversation\",Object(w.debounce)(function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,r=a.props.searchConversations,e.next=4,a.setState({keyword:n,conversationPage:0});case 4:if(!n){e.next=6;break}return e.abrupt(\"return\",r({keyword:n,limit:25,offset:0,type:\"private\"}));case 6:return e.abrupt(\"return\",r({limit:25,offset:0,type:\"private\"}));case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500)),Object(i.a)(Object(y.a)(a),\"handleScroll\",function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r,o,c,s,i,u,l,f,d,p,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.conversation,o=n.getConversations,c=r.list,s=c.requesting,i=c.data,u=c.total,l=a.state,f=l.conversationPage,d=l.keyword,p=u>i.length,v=t.target,p){e.next=7;break}return e.abrupt(\"return\");case 7:v.scrollHeight-v.scrollTop===v.clientHeight&&!s&&p&&a.setState({conversationPage:f+1},(function(){o({keyword:d,limit:25,offset:25*f,type:\"private\"})}));case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(i.a)(Object(y.a)(a),\"setActive\",(function(e){var t=a.props,n=t.setActiveConversation,r=t.currentPerformer,o=t.currentUser;n({conversationId:e,recipientId:o._id?o._id:r._id})})),a}return Object(a.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(g.a)(O.a.mark((function e(){var t,n,r,a,o,c,s,i,l,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.conversationsRef||(this.conversationsRef=Object(u.createRef)()),t=this.props,n=t.getConversations,r=t.setActiveConversation,a=t.toSource,o=t.toId,c=t.currentUser,s=t.currentPerformer,i=this.state,l=i.conversationPage,f=i.keyword,n({limit:25,offset:25*l,type:\"private\",keyword:f}),a&&o&&setTimeout((function(){r({source:a,sourceId:o,recipientId:c._id?c._id:s._id})}),1e3);case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this,t=this.props.conversation,n=t.list,r=n.data,a=n.requesting,o=t.mapping,c=t.activeConversation,s=void 0===c?{}:c;return this.conversationsRef||(this.conversationsRef=Object(u.createRef)()),P(\"div\",{className:\"conversation-list\",ref:this.conversationsRef,onScroll:this.handleScroll.bind(this)},P(j.a,{event:\"message_created\",handler:this.onMessage}),P(\"h4\",{className:\"text-center\",style:{fontSize:\"22px\"}},\"Messenger\"),P(S,{onSearch:function(t){t.persist(),e.onSearchConversation(t)}}),r.length>0&&r.map((function(t){return P(R,{key:t,data:o[t],setActive:e.setActive.bind(e),selected:s._id===t})})),a&&P(\"div\",{className:\"text-center\"},P(\"img\",{alt:\"loading\",src:\"/loading-ico.gif\",width:\"50px\"})),!a&&!r.length&&P(\"p\",{className:\"text-center\"},\"No conversation found.\"))}}]),n}(u.PureComponent),T={searchConversations:b.r,getConversations:b.f,setActiveConversation:b.y,getConversationDetail:b.d,receiveMessageSuccess:b.p,updateLastMessage:b.B},D=Object(d.b)((function(e){return{conversation:e.conversation,message:e.message,currentUser:e.user.current,currentPerformer:e.performer.current}}),T)(I),B=(n(\"UTbA\"),n(\"Dx9A\")),U=n(\"5rEg\"),L=n(\"a6RD\"),z=n.n(L),q=(n(\"qMfs\"),l.a.createElement);function F(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}A=z()((function(){return n.e(51).then(n.t.bind(null,\"x/1y\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"x/1y\"]},modules:[\"emoji-picker-react\"]}});var V=function(e){Object(o.a)(n,e);var t=F(n);function n(e){var a;return Object(r.a)(this,n),a=t.call(this,e),Object(i.a)(Object(y.a)(a),\"uploadRef\",void 0),a.uploadRef=l.a.createRef(),a}return Object(a.a)(n,[{key:\"onEmojiClick\",value:function(e,t){var n=this.props.onEmojiClick;n(t)}},{key:\"render\",value:function(){return q(l.a.Fragment,null,q(A,{onEmojiClick:this.onEmojiClick.bind(this),disableAutoFocus:!0,disableSearchBar:!0,disableSkinTonePicker:!0}))}}]),n}(u.PureComponent),H=l.a.createElement;function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var K=function(e){Object(o.a)(n,e);var t=X(n);function n(e){var a;return Object(r.a)(this,n),a=t.call(this,e),Object(i.a)(Object(y.a)(a),\"uploadRef\",void 0),Object(i.a)(Object(y.a)(a),\"_input\",void 0),Object(i.a)(Object(y.a)(a),\"state\",{text:\"\"}),Object(i.a)(Object(y.a)(a),\"onKeyDown\",(function(e){13===e.keyCode&&a.send()})),Object(i.a)(Object(y.a)(a),\"onChange\",(function(e){a.setState({text:e.target.value})})),Object(i.a)(Object(y.a)(a),\"onEmojiClick\",(function(e){var t=a.state.text;a.setMessage(t+e.emoji)})),Object(i.a)(Object(y.a)(a),\"onPhotoUploaded\",(function(e){var t=a.props.sentFileSuccess;if(e&&e.response){var n=e.response.data&&e.response.data.imageUrl||e.base64;t(J(J({},e.response.data),{imageUrl:n}))}})),a.uploadRef=l.a.createRef(),a}return Object(a.a)(n,[{key:\"componentDidMount\",value:function(){this.uploadRef||(this.uploadRef=l.a.createRef()),this._input||(this._input=l.a.createRef())}},{key:\"componentDidUpdate\",value:function(e){this.props.sendMessageStatus.success!==e.sendMessageStatus.success&&(this.setMessage(\"\"),this._input&&this._input.focus())}},{key:\"setMessage\",value:function(e){this.setState({text:e})}},{key:\"send\",value:function(){var e=this.state.text;if(e){var t=this.props,n=t.conversation;(0,t.sendMessage)({conversationId:n._id,data:{text:e}})}}},{key:\"render\",value:function(){var e=this,t=this.state.text,n=this.props,r=n.sendMessageStatus,a=n.conversation;return this.uploadRef||(this.uploadRef=l.a.createRef()),this._input||(this._input=l.a.createRef()),H(\"div\",{className:\"compose\"},H(U.a,{value:t,className:\"compose-input\",placeholder:\"Type a message\",onKeyDown:this.onKeyDown,onChange:this.onChange,disabled:r.sending||!a._id,ref:function(t){return e._input=t}}),H(\"div\",{className:\"grp-icons\"},H(B.a,{onClick:this.send.bind(this),disabled:r.sending,style:{fontSize:\"25px\",marginRight:\"10px\",color:\"#fe26b3\"}}),H(\"div\",{className:\"grp-emotions\"},H(\"img\",{src:\"/emotion-ico.png\",width:\"25px\",alt:\"\"}),H(V,{onEmojiClick:this.onEmojiClick.bind(this)}))))}}]),n}(u.PureComponent),W={sendMessage:b.u,sentFileSuccess:b.x},Y=Object(d.b)((function(e){return{sendMessageStatus:e.message.sendMessage,currentUser:e.user.current}}),W)(K),Q=(n(\"iZf9\"),l.a.createElement);function Z(e){var t=e.data,n=e.isMine,r=e.startsSequence,a=e.endsSequence,o=e.showTimestamp,c=N()(t.createdAt).format(\"LLLL\");return Q(\"div\",{className:[\"message\",\"\".concat(n?\"mine\":\"\"),\"\".concat(r?\"start\":\"\"),\"\".concat(a?\"end\":\"\")].join(\" \")},t.text&&Q(\"div\",{className:\"bubble-container\"},Q(\"div\",{className:\"bubble\",title:c},!t.imageUrl&&t.text,\" \",t.imageUrl&&Q(\"a\",{title:\"Click to view full content\",href:t.imageUrl,target:\"_blank\",rel:\"noreferrer\"},Q(\"img\",{src:t.imageUrl,width:\"180px\",alt:\"\"})))),o&&Q(\"div\",{className:\"timestamp\"},c))}var $=l.a.createElement;function ee(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var te=function(e){Object(o.a)(n,e);var t=ee(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(i.a)(Object(y.a)(e),\"messagesRef\",void 0),Object(i.a)(Object(y.a)(e),\"state\",{offset:1,onloadmore:!1}),Object(i.a)(Object(y.a)(e),\"renderMessages\",(function(){for(var t=e.props,n=t.message,r=t.currentUser,a=t.currentPerformer,o=n.items,c=0,s=o.length,i=[];c<s;){var u=o[c-1],l=o[c],f=o[c+1],d=l.senderId===(r&&r._id||a&&a._id),p=N()(l.createdAt),v=!0,b=!0,m=!0;if(u){var h=N()(u.createdAt),O=N.a.duration(p.diff(h));u.senderId===l.senderId&&O.as(\"hours\")<1&&(v=!1),O.as(\"hours\")<1&&(m=!1)}if(f){var g=N()(f.createdAt),y=N.a.duration(g.diff(p));f.senderId===l.senderId&&y.as(\"hours\")<1&&(b=!1)}l._id&&i.push($(Z,{key:c,isMine:d,startsSequence:v,endsSequence:b,showTimestamp:m,data:l})),c+=1}return e.scrollToBottom(),i})),e}return Object(a.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messagesRef||(this.messagesRef=Object(u.createRef)());case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"componentDidUpdate\",value:function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.conversation,t&&t.conversation&&t.conversation._id!==n._id&&this.setOffset();case 2:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"handleScroll\",value:function(){var e=Object(g.a)(O.a.mark((function e(t,n){var r,a,o,c,s,i,u,l,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.message,o=r.loadMoreMessages,c=a.fetching,s=a.items,i=a.total,u=this.state.offset,l=i>s.length,f=n.target,l){e.next=7;break}return e.abrupt(\"return\");case 7:if(0!==f.scrollTop||!t._id||c||!l){e.next=11;break}return e.next=10,this.setState({offset:u+1,onloadmore:!0});case 10:o({conversationId:t._id,limit:20,offset:20*(u-1)});case 11:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"setOffset\",value:function(){var e=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({offset:1});case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"scrollToBottom\",value:function(){if(!this.state.onloadmore&&this.messagesRef&&this.messagesRef.current){var e=this.messagesRef.current;window.setTimeout((function(){e.scrollTop=e.scrollHeight}),300)}}},{key:\"render\",value:function(){var e=this.props,t=e.conversation,n=e.message.fetching;return this.messagesRef||(this.messagesRef=Object(u.createRef)()),$(\"div\",{className:\"message-list custom\"},t&&t._id?$(l.a.Fragment,null,$(\"div\",{className:\"message-list-container\",ref:this.messagesRef,onScroll:this.handleScroll.bind(this,t)},n&&$(\"p\",{className:\"text-center\"},\"fetching...\"),this.renderMessages()),$(Y,{conversation:t})):$(\"div\",{className:\"start-conversation\"},$(\"p\",null,\"Click conversation to start\")))}}]),n}(u.PureComponent),ne={loadMoreMessages:b.l},re=Object(d.b)((function(e){var t=e.message.conversationMap,n=e.conversation.activeConversation;return{message:{items:t[n._id]&&t[n._id].items||[],total:t[n._id]&&t[n._id].total||0,fetching:t[n._id]&&t[n._id].fetching||!1},conversation:n,currentUser:e.user.current,currentPerformer:e.performer.current}}),ne)(te),ae=l.a.createElement;function oe(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ce=function(e){Object(o.a)(n,e);var t=oe(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:\"onClose\",value:function(){(0,this.props.deactiveConversation)()}},{key:\"render\",value:function(){var e=this.props,t=e.toSource,n=e.toId,r=e.activeConversation;return ae(\"div\",{className:\"messenger\"},ae(\"div\",{className:r._id?\"sidebar active\":\"sidebar\"},ae(D,{toSource:t,toId:n})),ae(\"div\",{className:r._id?\"chat-content active\":\"chat-content\"},ae(m.a,{onClick:this.onClose.bind(this),className:\"close-btn\"},\"close\"),ae(re,null)))}}]),n}(u.PureComponent),se={deactiveConversation:b.b},ie=Object(d.b)((function(e){return{activeConversation:e.conversation.activeConversation}}),se)(ce),ue=l.a.createElement;function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var pe=f.a.Content,ve=function(e){Object(o.a)(n,e);var t=de(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:\"componentWillUnmount\",value:function(){(0,this.props.resetMessageState)()}},{key:\"render\",value:function(){var e=this.props.query,t=void 0===e?{}:e;return ue(l.a.Fragment,null,ue(v.a,null,ue(\"title\",null,\"Messages\")),ue(f.a,null,ue(pe,null,ue(\"div\",{className:\"main-container\"},ue(ie,{toSource:t.toSource,toId:t.toId})))))}}],[{key:\"getInitialProps\",value:function(e){return{query:e.ctx.query}}}]),n}(u.PureComponent);Object(i.a)(ve,\"authenticate\",!0),Object(i.a)(ve,\"layout\",\"primary\");var be={resetMessageState:b.q};t.default=Object(d.b)((function(e){return{ui:fe({},e.ui)}}),be)(ve)},dwQ6:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/messages\",function(){return n(\"cJ20\")}])},jwwS:function(e,t,n){\"use strict\";var r;t.__esModule=!0,t.LoadableContext=void 0;var a=((r=n(\"q1tI\"))&&r.__esModule?r:{default:r}).default.createContext(null);t.LoadableContext=a},\"l+S1\":function(e,t,n){\"use strict\";var r=n(\"VTBJ\"),a=n(\"q1tI\"),o={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"}}]},name:\"search\",theme:\"outlined\"},c=n(\"6VBw\"),s=function(e,t){return a.createElement(c.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};s.displayName=\"SearchOutlined\";t.a=a.forwardRef(s)},wqbU:function(e,t,n){\"use strict\";n.d(t,\"f\",(function(){return o})),n.d(t,\"h\",(function(){return c})),n.d(t,\"g\",(function(){return s})),n.d(t,\"r\",(function(){return u})),n.d(t,\"t\",(function(){return l})),n.d(t,\"s\",(function(){return f})),n.d(t,\"o\",(function(){return d})),n.d(t,\"u\",(function(){return v})),n.d(t,\"w\",(function(){return b})),n.d(t,\"v\",(function(){return m})),n.d(t,\"p\",(function(){return h})),n.d(t,\"x\",(function(){return O})),n.d(t,\"b\",(function(){return g})),n.d(t,\"B\",(function(){return y})),n.d(t,\"y\",(function(){return w})),n.d(t,\"A\",(function(){return C})),n.d(t,\"z\",(function(){return x})),n.d(t,\"i\",(function(){return E})),n.d(t,\"k\",(function(){return k})),n.d(t,\"j\",(function(){return N})),n.d(t,\"l\",(function(){return R})),n.d(t,\"n\",(function(){return P})),n.d(t,\"m\",(function(){return M})),n.d(t,\"c\",(function(){return A})),n.d(t,\"q\",(function(){return I})),n.d(t,\"d\",(function(){return D})),n.d(t,\"e\",(function(){return B})),n.d(t,\"a\",(function(){return U}));var r=n(\"vo7w\"),a=Object(r.b)(\"getConversations\",\"LOAD_CONVERSATIONS\"),o=a.getConversations,c=a.getConversationsSuccess,s=a.getConversationsFail,i=Object(r.b)(\"searchConversations\",\"SEARCH_CONVERSATIONS\"),u=i.searchConversations,l=i.searchConversationsSuccess,f=i.searchConversationsFail,d=Object(r.b)(\"readMessages\",\"READ_MESSAGES\").readMessages,p=Object(r.b)(\"sendMessage\",\"SEND_MESSAGE\"),v=p.sendMessage,b=p.sendMessageSuccess,m=p.sendMessageFail,h=Object(r.b)(\"receiveMessageSuccess\",\"RECEIVE_MESSAGE_SUCCESS\").receiveMessageSuccess,O=Object(r.b)(\"sentFileSuccess\",\"SENT_FILE_SUCCESS\").sentFileSuccess,g=Object(r.b)(\"deactiveConversation\",\"DEACTIVE_CONVERSATION\").deactiveConversation,y=Object(r.a)(\"updateLastMessage\"),j=Object(r.b)(\"setActiveConversation\",\"SET_ACTIVE_CONVERSATION_RECEIVER\"),w=j.setActiveConversation,C=j.setActiveConversationSuccess,x=j.setActiveConversationFail,S=Object(r.b)(\"loadMessages\",\"LOAD_MESSAGES\"),E=S.loadMessages,k=S.loadMessagesSuccess,N=S.loadMessagesFail,_=Object(r.b)(\"loadMoreMessages\",\"LOAD_MORE_MESSAGES\"),R=_.loadMoreMessages,P=_.loadMoreMessagesSuccess,M=_.loadMoreMessagesFail,A=Object(r.a)(\"fetchingMessage\"),I=Object(r.a)(\"resetMessageState\"),T=Object(r.b)(\"getConversationDetail\",\"LOAD_CONVERSATION_ITEM\"),D=T.getConversationDetail,B=T.getConversationDetailSuccess,U=(T.getConversationDetailFail,Object(r.a)(\"COUNT_TOTAL_NOT_READ_MESSAGE\"))},zvFY:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return M}));var r=n(\"wx14\"),a=n(\"rePB\"),o=n(\"ODXe\"),c=n(\"U8pU\"),s=n(\"q1tI\"),i=n.n(s),u=n(\"TSYQ\"),l=n.n(u),f=n(\"bT9E\"),d=n(\"H84U\"),p=n(\"1OyB\"),v=function e(t){return Object(p.a)(this,e),new Error(\"unreachable case: \".concat(JSON.stringify(t)))},b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},m=function(e){return s.createElement(d.a,null,(function(t){var n,o=t.getPrefixCls,c=t.direction,i=e.prefixCls,u=e.size,f=e.className,d=b(e,[\"prefixCls\",\"size\",\"className\"]),p=o(\"btn-group\",i),m=\"\";switch(u){case\"large\":m=\"lg\";break;case\"small\":m=\"sm\";break;case\"middle\":case void 0:break;default:console.warn(new v(u))}var h=l()(p,(n={},Object(a.a)(n,\"\".concat(p,\"-\").concat(m),m),Object(a.a)(n,\"\".concat(p,\"-rtl\"),\"rtl\"===c),n),f);return s.createElement(\"div\",Object(r.a)({},d,{className:h}))}))},h=n(\"g0mS\"),O=n(\"CWQg\"),g=n(\"uaoM\"),y=n(\"3Nzz\"),j=n(\"8XRh\"),w=n(\"ye1Q\"),C=function(){return{width:0,opacity:0,transform:\"scale(0)\"}},x=function(e){return{width:e.scrollWidth,opacity:1,transform:\"scale(1)\"}},S=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?i.a.createElement(\"span\",{className:\"\".concat(t,\"-loading-icon\")},i.a.createElement(w.a,null)):i.a.createElement(j.default,{visible:n,motionName:\"\".concat(t,\"-loading-icon-motion\"),removeOnLeave:!0,onAppearStart:C,onAppearActive:x,onEnterStart:C,onEnterActive:x,onLeaveStart:x,onLeaveActive:C},(function(e,n){var r=e.className,a=e.style;return i.a.createElement(\"span\",{className:\"\".concat(t,\"-loading-icon\"),style:a,ref:n},i.a.createElement(w.a,{className:r}))}))},E=n(\"0n0R\"),k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},N=/^[\\u4e00-\\u9fa5]{2}$/,_=N.test.bind(N);function R(e){return\"text\"===e||\"link\"===e}function P(e,t){if(null!=e){var n,r=t?\" \":\"\";return\"string\"!==typeof e&&\"number\"!==typeof e&&\"string\"===typeof e.type&&_(e.props.children)?Object(E.a)(e,{children:e.props.children.split(\"\").join(r)}):\"string\"===typeof e?_(e)?s.createElement(\"span\",null,e.split(\"\").join(r)):s.createElement(\"span\",null,e):(n=e,s.isValidElement(n)&&n.type===s.Fragment?s.createElement(\"span\",null,e):e)}}Object(O.a)(\"default\",\"primary\",\"ghost\",\"dashed\",\"link\",\"text\"),Object(O.a)(\"circle\",\"round\"),Object(O.a)(\"submit\",\"button\",\"reset\");function M(e){return\"danger\"===e?{danger:!0}:{type:e}}var A=function(e,t){var n,i,u=e.loading,p=void 0!==u&&u,v=e.prefixCls,b=e.type,m=e.danger,O=e.shape,j=e.size,w=e.className,C=e.children,x=e.icon,E=e.ghost,N=void 0!==E&&E,M=e.block,A=void 0!==M&&M,I=e.htmlType,T=void 0===I?\"button\":I,D=k(e,[\"loading\",\"prefixCls\",\"type\",\"danger\",\"shape\",\"size\",\"className\",\"children\",\"icon\",\"ghost\",\"block\",\"htmlType\"]),B=s.useContext(y.b),U=s.useState(!!p),L=Object(o.a)(U,2),z=L[0],q=L[1],F=s.useState(!1),V=Object(o.a)(F,2),H=V[0],G=V[1],J=s.useContext(d.b),X=J.getPrefixCls,K=J.autoInsertSpaceInButton,W=J.direction,Y=t||s.createRef(),Q=s.useRef(),Z=function(){return 1===s.Children.count(C)&&!x&&!R(b)};i=\"object\"===Object(c.a)(p)&&p.delay?p.delay||!0:!!p,s.useEffect((function(){clearTimeout(Q.current),\"number\"===typeof i?Q.current=window.setTimeout((function(){q(i)}),i):q(i)}),[i]),s.useEffect((function(){if(Y&&Y.current&&!1!==K){var e=Y.current.textContent;Z()&&_(e)?H||G(!0):H&&G(!1)}}),[Y]);var $=function(t){var n,r=e.onClick,a=e.disabled;z||a?t.preventDefault():null===(n=r)||void 0===n||n(t)};Object(g.a)(!(\"string\"===typeof x&&x.length>2),\"Button\",\"`icon` is using ReactNode instead of string naming in v4. Please check `\".concat(x,\"` at https://ant.design/components/icon\")),Object(g.a)(!(N&&R(b)),\"Button\",\"`link` or `text` button can't be a `ghost` button.\");var ee=X(\"btn\",v),te=!1!==K,ne=\"\";switch(j||B){case\"large\":ne=\"lg\";break;case\"small\":ne=\"sm\"}var re=z?\"loading\":x,ae=l()(ee,(n={},Object(a.a)(n,\"\".concat(ee,\"-\").concat(b),b),Object(a.a)(n,\"\".concat(ee,\"-\").concat(O),O),Object(a.a)(n,\"\".concat(ee,\"-\").concat(ne),ne),Object(a.a)(n,\"\".concat(ee,\"-icon-only\"),!C&&0!==C&&!!re),Object(a.a)(n,\"\".concat(ee,\"-background-ghost\"),N&&!R(b)),Object(a.a)(n,\"\".concat(ee,\"-loading\"),z),Object(a.a)(n,\"\".concat(ee,\"-two-chinese-chars\"),H&&te),Object(a.a)(n,\"\".concat(ee,\"-block\"),A),Object(a.a)(n,\"\".concat(ee,\"-dangerous\"),!!m),Object(a.a)(n,\"\".concat(ee,\"-rtl\"),\"rtl\"===W),n),w),oe=x&&!z?x:s.createElement(S,{existIcon:!!x,prefixCls:ee,loading:!!z}),ce=C||0===C?function(e,t){var n=!1,r=[];return s.Children.forEach(e,(function(e){var t=Object(c.a)(e),a=\"string\"===t||\"number\"===t;if(n&&a){var o=r.length-1,s=r[o];r[o]=\"\".concat(s).concat(e)}else r.push(e);n=a})),s.Children.map(r,(function(e){return P(e,t)}))}(C,Z()&&te):null,se=Object(f.a)(D,[\"navigate\"]);if(void 0!==se.href)return s.createElement(\"a\",Object(r.a)({},se,{className:ae,onClick:$,ref:Y}),oe,ce);var ie=s.createElement(\"button\",Object(r.a)({},D,{type:T,className:ae,onClick:$,ref:Y}),oe,ce);return R(b)?ie:s.createElement(h.a,null,ie)},I=s.forwardRef(A);I.displayName=\"Button\",I.Group=m,I.__ANT_BUTTON=!0;t.b=I}},[[\"dwQ6\",0,1,3,4,2,5,6,8,14,21,26,27,12]]]);","extractedComments":[]}