{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[68],{\"0JOW\":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/account/performer/photos\",function(){return r(\"Vf9i\")}])},BMrR:function(e,t,r){\"use strict\";var n=r(\"qrJ5\");t.a=n.a},M6VO:function(e,t,r){},Vf9i:function(e,t,r){\"use strict\";r.r(t);var n=r(\"wx14\"),o=r(\"o0o1\"),a=r.n(o),c=r(\"HaE+\"),s=r(\"1OyB\"),i=r(\"vuIU\"),u=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),m=r(\"rePB\"),p=r(\"q1tI\"),d=r.n(p),b=r(\"8Kt/\"),h=r.n(b),_=r(\"tsqr\"),N=r(\"zeV3\"),v=r(\"2/Rp\"),y=r(\"Y1dN\"),O=r(\"/MKj\"),g=r(\"WT8E\"),w=r(\"NsEo\"),j=r(\"nOHt\"),P=r.n(j),E=r(\"YFqc\"),k=r.n(E),x=r(\"mr32\"),C=r(\"bx4M\"),M=r(\"RotF\"),R=r.n(M),S=r(\"G3dp\"),L=r(\"rP/q\"),I=r(\"psLn\"),T=r(\"5aC+\"),q=(r(\"V/Nr\"),\"/var/www/dtest.live/src/components/photos/photo-dashboard-grid.tsx\"),D=p.createElement,J=function(e){var t=e.data,r=e.searching,n=e.title,o=e.hasMore,a=e.addPhotos,c=e.success,s=e.remove;return D(R.a,{pageStart:0,loadMore:a,hasMore:o,loader:D(\"p\",{__self:undefined,__source:{fileName:q,lineNumber:59,columnNumber:13}},\"Loading...\"),__self:undefined,__source:{fileName:q,lineNumber:55,columnNumber:3}},D(C.a,{className:\"photo-grid\",title:n,bordered:!1,__self:undefined,__source:{fileName:q,lineNumber:61,columnNumber:5}},r?D(\"p\",{__self:undefined,__source:{fileName:q,lineNumber:108,columnNumber:9}},\"Loading...\"):c&&(t.length>0?t.map((function(e){return D(C.a.Grid,{className:\"photo-box\",key:e._id,__self:undefined,__source:{fileName:q,lineNumber:66,columnNumber:13}},D(\"div\",{className:\"photo-thumbnail\",__self:undefined,__source:{fileName:q,lineNumber:67,columnNumber:15}},D(\"img\",{src:e.photo.thumbnails[0]||\"/no-image.jpg\",alt:\"\",__self:undefined,__source:{fileName:q,lineNumber:68,columnNumber:17}}),D(N.b,{className:\"actions\",__self:undefined,__source:{fileName:q,lineNumber:69,columnNumber:17}},D(k.a,{href:{pathname:\"/account/performer/photos/update\",query:{data:JSON.stringify(e)}},as:\"/account/performer/photos/\".concat(e._id,\"/update\"),__self:undefined,__source:{fileName:q,lineNumber:70,columnNumber:19}},D(S.a,{style:{color:\"#ff0066\"},__self:undefined,__source:{fileName:q,lineNumber:77,columnNumber:21}})),D(T.a,{confirm:function(){return s(e._id)},__self:undefined,__source:{fileName:q,lineNumber:79,columnNumber:19}})),function(e){switch(e){case\"active\":return D(x.a,{color:\"#87d068\",className:\"photo-status\",__self:void 0,__source:{fileName:q,lineNumber:29,columnNumber:9}},\"Active\");case\"inactive\":return D(x.a,{color:\"#f50\",className:\"photo-status\",__self:void 0,__source:{fileName:q,lineNumber:35,columnNumber:9}},\"Inactive\");case\"draft\":return D(x.a,{className:\"photo-status\",__self:void 0,__source:{fileName:q,lineNumber:40,columnNumber:14}},\"Inactive\");default:return D(p.Fragment,null)}}(e.status)),D(\"div\",{className:\"photo-info\",__self:undefined,__source:{fileName:q,lineNumber:83,columnNumber:15}},D(\"span\",{__self:undefined,__source:{fileName:q,lineNumber:84,columnNumber:17}},Object(L.a)(e.title))),D(\"div\",{className:\"photo-description\",__self:undefined,__source:{fileName:q,lineNumber:86,columnNumber:15}},\"Created at\",\" \",Object(I.f)(e.createdAt,\"DD MMMM YYYY\")),D(\"div\",{className:\"photo-description\",__self:undefined,__source:{fileName:q,lineNumber:91,columnNumber:15}},D(k.a,{href:{pathname:\"/account/performer/galleries/update\",query:{data:JSON.stringify(e.gallery)}},as:\"/account/performer/galleries/\".concat(e.gallery._id,\"/update\"),__self:undefined,__source:{fileName:q,lineNumber:92,columnNumber:17}},e.gallery.name)))})):D(\"p\",{__self:undefined,__source:{fileName:q,lineNumber:105,columnNumber:11}},\"No items\"))))};J.defaultProps={success:!1,searching:!1,title:\"\",addPhotos:null,hasMore:!1,remove:null};var H=J,K=(r(\"M6VO\"),r(\"CLrh\")),U=\"/var/www/dtest.live/pages/account/performer/photos/index.tsx\",Y=d.a.createElement;function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var F=function(e){Object(u.a)(r,e);var t=A(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={limit:12,offset:0},n}return Object(i.a)(r,[{key:\"componentDidMount\",value:function(){this.loadPhotos()}},{key:\"onRemove\",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.removeMyPhoto,e.prev=1,e.next=4,K.l.remove(t);case 4:_.b.success(\"Removed!\"),r(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.showError(e.t0);case 11:case\"end\":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"addPhotos\",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.addMyPhotos,e.prev=1,r=this.state.limit,n=this.state.offset,n=r+n,e.next=7,K.l.myPhotos(V(V({},this.state),{},{offset:n}));case 7:o=e.sent,t(o.data.data),this.setState({offset:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.showError(e.t0);case 15:case\"end\":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:\"loadPhotos\",value:function(){(0,this.props.getMyPhotos)(V({},this.state))}},{key:\"showError\",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(t);case 2:r=e.sent,_.b.error(Object(w.h)(r));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.props,t=e.data,r=e.searching,o=e.total,a={data:t,searching:r,success:e.success,total:o,hasMore:!r&&t.length<o,addPhotos:this.addPhotos.bind(this),remove:this.onRemove.bind(this),title:\"\"};return Y(d.a.Fragment,null,Y(h.a,{__self:this,__source:{fileName:U,lineNumber:105,columnNumber:9}},Y(\"title\",{__self:this,__source:{fileName:U,lineNumber:106,columnNumber:11}},\"My Photos\")),Y(\"div\",{className:\"performer-photos-page\",__self:this,__source:{fileName:U,lineNumber:108,columnNumber:9}},Y(y.a,{title:\"Photos\",extra:Y(N.b,{__self:this,__source:{fileName:U,lineNumber:112,columnNumber:15}},Y(v.a,{type:\"primary\",onClick:function(){return P.a.push(\"/account/performer/galleries/add\")},__self:this,__source:{fileName:U,lineNumber:113,columnNumber:17}},\"Add a new gallery\"),Y(v.a,{type:\"primary\",onClick:function(){return P.a.push(\"/account/performer/photos/add\")},__self:this,__source:{fileName:U,lineNumber:116,columnNumber:17}},\"Add new photos\")),__self:this,__source:{fileName:U,lineNumber:109,columnNumber:11}}),Y(H,Object(n.a)({},a,{__self:this,__source:{fileName:U,lineNumber:122,columnNumber:11}}))))}}]),r}(p.PureComponent);Object(m.a)(F,\"authenticate\",!0),Object(m.a)(F,\"layout\",\"primary\");var W={getMyPhotos:g.k,removeMyPhoto:g.D,addMyPhotos:g.b};t.default=Object(O.b)((function(e){return V({},e.performer.assets.photos)}),W)(F)},YFqc:function(e,t,r){e.exports=r(\"cTJO\")},cTJO:function(e,t,r){\"use strict\";var n=r(\"zoAU\"),o=r(\"7KCV\");t.__esModule=!0,t.default=void 0;var a,c=o(r(\"q1tI\")),s=r(\"elyg\"),i=r(\"nOHt\"),u=new Map,l=window.IntersectionObserver,f={};var m=function(e,t){var r=a||(l?a=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(a.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0);return r?(r.observe(e),u.set(e,t),function(){try{r.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,r,n){(0,s.isLocalURL)(t)&&(e.prefetch(t,r,n).catch((function(e){0})),f[t+\"%\"+r]=!0)}var d=function(e){var t=!1!==e.prefetch,r=c.default.useState(),o=n(r,2),a=o[0],u=o[1],d=(0,i.useRouter)(),b=d&&d.pathname||\"/\",h=c.default.useMemo((function(){var t=(0,s.resolveHref)(b,e.href,!0),r=n(t,2),o=r[0],a=r[1];return{href:o,as:e.as?(0,s.resolveHref)(b,e.as):a||o}}),[b,e.href,e.as]),_=h.href,N=h.as;c.default.useEffect((function(){if(t&&l&&a&&a.tagName&&(0,s.isLocalURL)(_)&&!f[_+\"%\"+N])return m(a,(function(){p(d,_,N)}))}),[t,a,_,N,d]);var v=e.children,y=e.replace,O=e.shallow,g=e.scroll;\"string\"===typeof v&&(v=c.default.createElement(\"a\",null,v));var w=c.Children.only(v),j={ref:function(e){e&&u(e),w&&\"object\"===typeof w&&w.ref&&(\"function\"===typeof w.ref?w.ref(e):\"object\"===typeof w.ref&&(w.ref.current=e))},onClick:function(e){w.props&&\"function\"===typeof w.props.onClick&&w.props.onClick(e),e.defaultPrevented||function(e,t,r,n,o,a,c){(\"A\"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&\"_self\"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(r))&&(e.preventDefault(),null==c&&(c=n.indexOf(\"#\")<0),t[o?\"replace\":\"push\"](r,n,{shallow:a}).then((function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())})))}(e,d,_,N,y,O,g)}};return t&&(j.onMouseEnter=function(e){(0,s.isLocalURL)(_)&&(w.props&&\"function\"===typeof w.props.onMouseEnter&&w.props.onMouseEnter(e),p(d,_,N,{priority:!0}))}),(e.passHref||\"a\"===w.type&&!(\"href\"in w.props))&&(j.href=(0,s.addBasePath)((0,s.addLocale)(N,d&&d.locale,d&&d.defaultLocale))),c.default.cloneElement(w,j)};t.default=d},kPKH:function(e,t,r){\"use strict\";var n=r(\"/kpp\");t.a=n.a},mr32:function(e,t,r){\"use strict\";var n=r(\"rePB\"),o=r(\"wx14\"),a=r(\"ODXe\"),c=r(\"q1tI\"),s=r(\"TSYQ\"),i=r.n(s),u=r(\"bT9E\"),l=r(\"4i/N\"),f=r(\"H84U\"),m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},p=function(e){var t,r=e.prefixCls,a=e.className,s=e.checked,u=e.onChange,l=e.onClick,p=m(e,[\"prefixCls\",\"className\",\"checked\",\"onChange\",\"onClick\"]),d=(0,c.useContext(f.b).getPrefixCls)(\"tag\",r),b=i()(d,(t={},Object(n.a)(t,\"\".concat(d,\"-checkable\"),!0),Object(n.a)(t,\"\".concat(d,\"-checkable-checked\"),s),t),a);return c.createElement(\"span\",Object(o.a)({},p,{className:b,onClick:function(e){null===u||void 0===u||u(!s),null===l||void 0===l||l(e)}}))},d=r(\"09Wf\"),b=r(\"g0mS\"),h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},_=new RegExp(\"^(\".concat(d.a.join(\"|\"),\")(-inverse)?$\")),N=new RegExp(\"^(\".concat(d.b.join(\"|\"),\")$\")),v=function(e,t){var r,s=e.prefixCls,m=e.className,p=e.style,d=e.children,v=e.icon,y=e.color,O=e.onClose,g=e.closeIcon,w=e.closable,j=void 0!==w&&w,P=h(e,[\"prefixCls\",\"className\",\"style\",\"children\",\"icon\",\"color\",\"onClose\",\"closeIcon\",\"closable\"]),E=c.useContext(f.b),k=E.getPrefixCls,x=E.direction,C=c.useState(!0),M=Object(a.a)(C,2),R=M[0],S=M[1];c.useEffect((function(){\"visible\"in P&&S(P.visible)}),[P.visible]);var L=function(){return!!y&&(_.test(y)||N.test(y))},I=Object(o.a)({backgroundColor:y&&!L()?y:void 0},p),T=L(),q=k(\"tag\",s),D=i()(q,(r={},Object(n.a)(r,\"\".concat(q,\"-\").concat(y),T),Object(n.a)(r,\"\".concat(q,\"-has-color\"),y&&!T),Object(n.a)(r,\"\".concat(q,\"-hidden\"),!R),Object(n.a)(r,\"\".concat(q,\"-rtl\"),\"rtl\"===x),r),m),J=function(e){e.stopPropagation(),null===O||void 0===O||O(e),e.defaultPrevented||\"visible\"in P||S(!1)},H=\"onClick\"in P||d&&\"a\"===d.type,K=Object(u.a)(P,[\"visible\"]),U=v||null,Y=U?c.createElement(c.Fragment,null,U,c.createElement(\"span\",null,d)):d,B=c.createElement(\"span\",Object(o.a)({},K,{ref:t,className:D,style:I}),Y,j?g?c.createElement(\"span\",{className:\"\".concat(q,\"-close-icon\"),onClick:J},g):c.createElement(l.a,{className:\"\".concat(q,\"-close-icon\"),onClick:J}):null);return H?c.createElement(b.a,null,B):B},y=c.forwardRef(v);y.displayName=\"Tag\",y.CheckableTag=p;t.a=y}},[[\"0JOW\",0,1,3,4,2,5,7,6,8,9,10,11,13,14,15,16,18,19,20,24,34,36,44,12]]]);","extractedComments":[]}