{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport '../index.less';\nimport { PureComponent } from 'react';\nimport Head from 'next/head';\nimport { authService } from 'src/services/auth.service';\nimport { Form, message, Input, Button, Select } from 'antd';\nimport { getResponseError } from 'src/lib/utils';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport { FormRegisterPlaceHolder } from '@components/common/layout';\n\nclass ForgotPasswordPage extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false\n    };\n  }\n\n  async onFinish(data) {\n    try {\n      this.setState({\n        loading: true\n      });\n      await authService.forgotPassword(data.email, data.type);\n      message.success('New password have been sent to your email');\n      this.setState({\n        loading: false\n      });\n    } catch (e) {\n      const err = await Promise.resolve(e);\n      message.error(getResponseError(err));\n      this.setState({\n        loading: false\n      });\n    }\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    const {\n      ui\n    } = this.props;\n    return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Forgot Password\")), __jsx(\"div\", {\n      className: \"register-page\"\n    }, __jsx(\"div\", {\n      className: \"form-register-container\"\n    }, __jsx(Form, {\n      onFinish: this.onFinish.bind(this),\n      layout: \"vertical\",\n      initialValues: {\n        type: 'user'\n      }\n    }, __jsx(\"h1\", null, \"Forgot Password\"), __jsx(Form.Item, {\n      label: \"Type\",\n      name: \"type\",\n      key: \"type\",\n      rules: [{\n        required: true\n      }]\n    }, __jsx(Select, null, __jsx(Select.Option, {\n      value: \"user\",\n      key: \"user\"\n    }, \"User\"), __jsx(Select.Option, {\n      value: \"performer\",\n      key: \"performer\"\n    }, (ui === null || ui === void 0 ? void 0 : ui.singularTextModel) || 'Performer'), __jsx(Select.Option, {\n      value: \"studio\",\n      key: \"studio\"\n    }, \"Studio\"))), __jsx(Form.Item, {\n      name: \"email\",\n      key: \"email\",\n      label: \"Email\",\n      rules: [{\n        type: 'email',\n        message: 'The input is not valid E-mail!'\n      }, {\n        required: true,\n        message: 'Please input your email!'\n      }]\n    }, __jsx(Input, {\n      type: \"email\",\n      placeholder: \"abc@example.com\"\n    })), __jsx(Form.Item, null, __jsx(Button, {\n      type: \"primary\",\n      disabled: loading,\n      loading: loading,\n      htmlType: \"submit\"\n    }, \"Submit\")), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: '100%',\n        margin: '15px 0'\n      }\n    }, __jsx(Link, {\n      href: \"/auth/resend-verification-email\"\n    }, __jsx(\"a\", null, \"Resend Email Verification\")), __jsx(Link, {\n      href: \"/auth/login/user\"\n    }, __jsx(\"a\", null, \"Login\"))))), __jsx(FormRegisterPlaceHolder, {\n      ui: ui\n    })));\n  }\n\n}\n\n_defineProperty(ForgotPasswordPage, \"layout\", 'auth');\n\n_defineProperty(ForgotPasswordPage, \"authenticate\", false);\n\nconst mapStates = state => ({\n  ui: state.ui\n});\n\nconst mapDispatch = {};\nexport default connect(mapStates, mapDispatch)(ForgotPasswordPage);","map":null,"metadata":{},"sourceType":"module"}