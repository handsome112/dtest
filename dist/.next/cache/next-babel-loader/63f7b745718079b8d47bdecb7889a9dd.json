{"ast":null,"code":"var _jsxFileName = \"/var/www/dtest.live/pages/studio/payout-requests/create.tsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Head from 'next/head';\nimport PayoutRequestForm from '@components/payout-request/form';\nimport { message } from 'antd';\nimport PageHeader from '@components/common/layout/page-header';\nimport { payoutRequestService } from 'src/services';\nimport Router from 'next/router';\nimport './index.less';\n\nclass PayoutRequestCreatePage extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      submitting: false // success: false\n\n    };\n  }\n\n  async submit(data) {\n    if (!data.date[0] || !data.date[1]) return;\n\n    try {\n      this.setState({\n        submitting: true\n      });\n      const body = {\n        paymentAccountType: data.paymentAccountType,\n        requestNote: data.requestNote,\n        sourceType: 'studio',\n        fromDate: data.date[0],\n        toDate: data.date[1]\n      };\n      await payoutRequestService.create(body, 'studio');\n      message.success('Create Success!');\n      Router.push('/studio/payout-requests');\n    } catch (e) {\n      const error = await Promise.resolve(e);\n      message.error(error);\n    } finally {\n      this.setState({\n        submitting: false\n      });\n    }\n  }\n\n  render() {\n    const {\n      submitting\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, \"Payout Request\")), __jsx(\"div\", {\n      className: \"payout-request-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, __jsx(PageHeader, {\n      title: \"Create a Payout Request\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }), __jsx(PayoutRequestForm, {\n      payout: {},\n      submit: this.submit.bind(this),\n      submitting: submitting // eslint-disable-next-line jsx-a11y/aria-role\n      ,\n      role: \"studio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\n_defineProperty(PayoutRequestCreatePage, \"layout\", 'primary');\n\n_defineProperty(PayoutRequestCreatePage, \"authenticate\", true);\n\nexport default PayoutRequestCreatePage;","map":null,"metadata":{},"sourceType":"module"}